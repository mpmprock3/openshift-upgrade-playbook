---
# AAP Credential Type and Instance Definitions
# Import these via AAP API or web interface

# Custom Credential Type for OpenShift Access
- model: awx.credentialtype
  fields:
    name: "OpenShift Cluster Access"
    description: "Credential type for OpenShift cluster API access"
    kind: "cloud"
    inputs:
      fields:
        - id: cluster_api_url
          type: string
          label: "Cluster API URL"
          help_text: "OpenShift cluster API endpoint (e.g., https://api.cluster.example.com:6443)"
          
        - id: openshift_token
          type: string
          label: "OpenShift Token"
          help_text: "Service account token or user token for cluster access"
          secret: true
          
        - id: validate_certs
          type: boolean
          label: "Validate SSL Certificates"
          help_text: "Whether to validate SSL certificates when connecting to the cluster"
          default: true
          
        - id: cluster_name
          type: string
          label: "Cluster Name"
          help_text: "Friendly name for the cluster (for reporting)"
          
        - id: cluster_environment  
          type: string
          label: "Environment"
          help_text: "Environment classification (prod, staging, dev)"
          
      required:
        - cluster_api_url
        - openshift_token
        
    injectors:
      env:
        CLUSTER_API_URL: "{{ cluster_api_url }}"
        OPENSHIFT_TOKEN: "{{ openshift_token }}"  
        VALIDATE_SSL_CERTS: "{{ validate_certs | default(true) }}"
        CLUSTER_NAME: "{{ cluster_name | default('') }}"
        CLUSTER_ENVIRONMENT: "{{ cluster_environment | default('') }}"
        
      extra_vars:
        cluster_api_url: "{{ cluster_api_url }}"
        cluster_token: "{{ openshift_token }}"
        validate_ssl_certs: "{{ validate_certs | default(true) }}"
        cluster_name: "{{ cluster_name | default('unknown') }}"
        cluster_environment: "{{ cluster_environment | default('unknown') }}"

---
# Sample Credential Instances (update with actual values)

# Production East Cluster
- model: awx.credential
  fields:
    name: "Production East OpenShift"
    description: "Production East OpenShift cluster access"
    organization: 1  # Update with your organization ID
    credential_type: 1  # Reference to OpenShift custom credential type above
    inputs:
      cluster_api_url: "https://api.prod-east.example.com:6443"
      openshift_token: "ENCRYPTED_TOKEN_HERE"  # Will be encrypted by AAP
      validate_certs: true
      cluster_name: "Production East"
      cluster_environment: "production"

# Production West Cluster  
- model: awx.credential
  fields:
    name: "Production West OpenShift"
    description: "Production West OpenShift cluster access"
    organization: 1  # Update with your organization ID  
    credential_type: 1  # Reference to OpenShift custom credential type
    inputs:
      cluster_api_url: "https://api.prod-west.example.com:6443"
      openshift_token: "ENCRYPTED_TOKEN_HERE"  # Will be encrypted by AAP
      validate_certs: true
      cluster_name: "Production West"
      cluster_environment: "production"

# Staging Cluster
- model: awx.credential
  fields:
    name: "Staging OpenShift"
    description: "Staging OpenShift cluster access"
    organization: 1  # Update with your organization ID
    credential_type: 1  # Reference to OpenShift custom credential type  
    inputs:
      cluster_api_url: "https://api.staging.example.com:6443"
      openshift_token: "ENCRYPTED_TOKEN_HERE"  # Will be encrypted by AAP
      validate_certs: true
      cluster_name: "Staging"
      cluster_environment: "staging"

# Development Cluster
- model: awx.credential
  fields:
    name: "Development OpenShift"
    description: "Development OpenShift cluster access"  
    organization: 1  # Update with your organization ID
    credential_type: 1  # Reference to OpenShift custom credential type
    inputs:
      cluster_api_url: "https://api.dev.example.com:6443"
      openshift_token: "ENCRYPTED_TOKEN_HERE"  # Will be encrypted by AAP  
      validate_certs: false  # Often self-signed in dev
      cluster_name: "Development"
      cluster_environment: "development"

---
# Machine Credential for localhost execution
- model: awx.credential
  fields:
    name: "Localhost Machine"
    description: "Localhost execution credential"
    organization: 1
    credential_type: 1  # Built-in Machine credential type
    inputs:
      username: ""  # Empty for local execution
      
---
# Notification Credentials

# Slack Integration
- model: awx.credential  
  fields:
    name: "Slack Notifications"
    description: "Slack webhook for notifications"
    organization: 1
    credential_type: 2  # Custom credential type for webhooks
    inputs:
      webhook_url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
      channel: "#openshift-alerts"
      username: "AAP OpenShift Bot"

# Email SMTP
- model: awx.credential
  fields:
    name: "SMTP Email"  
    description: "SMTP server for email notifications"
    organization: 1
    credential_type: 3  # Custom credential type for SMTP
    inputs:
      smtp_server: "smtp.example.com"
      smtp_port: 587
      smtp_username: "noreply@example.com"
      smtp_password: "ENCRYPTED_PASSWORD_HERE"
      use_tls: true

---
# Vault Integration (if using HashiCorp Vault)
- model: awx.credential
  fields:
    name: "HashiCorp Vault"
    description: "Vault server for secret retrieval"
    organization: 1  
    credential_type: 4  # HashiCorp Vault credential type
    inputs:
      vault_server: "https://vault.example.com:8200"
      vault_token: "VAULT_TOKEN_HERE"
      vault_namespace: "openshift"
